/*!
 * Selector Engine
 *
 * Copyright (c) 2014
 * Licensed under the MIT license.
 */
(function(){"use strict";var a,b,c,d,e,f,g,h,i=this,j=i.document,k={},l={},m={},n=/^(?:#([\w-]+)|([\w-]+)|\.([\w-]+)|\[([\w-]+)(?:=['"]?([\w-]+)['"]?)?\])$/,o={byId:/^#([\w-]+)/,byClass:/^\.([\w-]+)/,byTag:/^([\w-]+)/,byAttr:/^\[([\w-]+)(?:=['"]?([\w-]+)['"]?)?\]/},p=/^(\s+)/,q=function(){return String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s+|\s+$/g,"")}}();a=function(a){var b,d=[];if(!a||"string"!=typeof a)return d;if(a=q(a),b=n.exec(a)){if(b[1])return l.byId(b[1]);if(b[2])return l.byTag(b[2]);if(b[3])return l.byClass(b[3]);if(b[4])return l.byAttr(b[4],void 0,b[5])}return d=c(a,d)},l.byId=function(a){var b=j.getElementById(a);return b?[b]:[]},l.byTag=function(a,b){return b=b&&1===b.nodeType?b:j,b.getElementsByTagName(a)},l.byAttr=function(a,b,c){var d,e,f,g=[],h=0,i="class"!==a||k.byClass?!0:!1;for(b=b&&1===b.nodeType?b:j,d=b.getElementsByTagName("*"),f=d.length;f>h;h++)i?e=d[h].getAttribute(a):(e=d[h].getAttributeNode(a),e=e.specified?e.value:null),e&&(c&&c===e||!c)&&g.push(d[h]);return g},m.byId=function(a,b){return b.getAttribute("id")===q(a)},m.byTag=function(a,b){return b.tagName.toLowerCase()===a.toLowerCase()},m.byClass=function(a,b){var c=new RegExp("(^|\\s)"+a+"(\\s|$)");return c.test(b.className)},m.byAttr=function(a,b,c){var d,e="class"!==a||k.byClass?!0:!1;return e?d=b.getAttribute(a):(d=b.getAttributeNode(a),d=d.specified?d.value:null),null!==d&&(c&&c===d||!c)?!0:!1},b=function(){k.byClass=j.getElementsByClassName?!0:!1,k.QSA=j.querySelectorAll?!0:!1,l.byClass=k.byClass?function(a,b){return b=b&&1===b.nodeType?b:j,b.getElementsByClassName(a)}:function(a,b){var c,d,e=[],f=0,g=new RegExp("(^|\\s)"+a+"(\\s|$)");for(b=b&&1===b.nodeType?b:j,c=b.getElementsByTagName("*"),d=c.length;d>f;f++)g.test(c[f].className)&&e.push(c[f]);return e}},g=function(a){for(var b,c,d,e,f=[],g=a;g;){c=p.exec(g),(!d||c)&&(c&&(g=g.slice(c[0].length)),b=[],f.push(b)),d=!1;for(e in o)o.hasOwnProperty(e)&&(c=o[e].exec(g),c&&(d=!0,b.push({type:e,name:c[1],value:c[2]}),g=g.slice(c[0].length)));if(!d)break}if(g.length)throw new SyntaxError('Unsupported Selector: "'+a+'"');return f},d=function(a){var b;for(b in a)if("byId"===a[b].type)return b},e=function(a,b){var c,d,e,f,g,h=[];for(b||(b=[]),f=a.length,g=b.length,d=0;f>d;d++){for(c=!0,e=0;g>e;e++)if(!m[b[e].type](b[e].name,a[d],b[e].value)){c=!1;break}c&&h.push(a[d])}return h},f=function(a,b){var c;if(a.length){for(c=a.pop(),b=b.parentNode;b;){if(1===b.nodeType&&e([b],c).length)return f(a,b);b=b.parentNode}return!1}return!0},h=function(a,b){var c,d=[];for(c in b)f(a,b[c])&&d.push(b[c]);return d},c=function(a,b){var c,f,i,j,k=g(a);if(b=b||[],k.length){if(c=k.pop(),j=d(c),j?(f=c.splice(j,1)[0],i=l[f.type](f.name)):(f=c.shift(),i=l[f.type](f.name,void 0,f.value)),!i.length)return b;b=b.concat(e(i,c))}return b.length?(k.length&&(b=h(k,b)),b):b},b(),"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:i.$=a}).call(this);